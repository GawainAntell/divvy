% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/subsample_circle.R
\name{cookies}
\alias{cookies}
\title{Rarefy localities within circular regions of standard area}
\usage{
cookies(dat, xy, iter, nSite, siteId, r, weight = FALSE, output = "locs")
}
\arguments{
\item{dat}{A \code{data.frame} or \code{matrix} containing the
coordinate columns \code{xy} and any associated variables, e.g. taxon names.}

\item{xy}{A vector of two elements, specifying the name or numeric position
of the columns in \code{dat} containing longitude and latitude coordinates.
Coordinates for the same site ID should be identical, and where IDs are
raster cells the coordinates are usually expected to be cell centroids.}

\item{iter}{The number of spatial subsamples to return}

\item{nSite}{The quota of unique locations to include in each subsample.}

\item{siteId}{The name or numeric position of the column in \code{dat}
containing identifiers for unique spatial sites, e.g. raster cell names.}

\item{r}{Numeric value for the radius (km) defining the circular extent
of each spatial subsample.}

\item{weight}{Whether sites within the subsample radius should be drawn
at random (\code{weight = FALSE}) or with probability inversely proportional
to the square of their distance from the centre of the subsample region.}

\item{output}{Whether the returned data should be a two-column matrix of
subsample site coordinates (\code{output = 'locs'}), with row names the
site IDs, or the subset of rows from \code{dat} associated with those
coordinates (\code{output = 'full'}).}
}
\description{
Spatially subsample a dataset to produce samples of standard area and extent.
}
\details{
The function takes a single location as a starting (seed) point and
circumscribes a buffer of \code{r} km around it. Buffer circles that span
the antemeridian (180 deg longitude) are wrapped as a multipolygon
to prevent artificial truncation. After standardising radial extent, sites
are drawn within the circular extent until a quota of \code{nSite}.
Sites are sampled without replacement, so a location is only used as a seed
point if it is within \code{r} km distance of at least \code{nSite} locations.

The probability of drawing each site within the standardised extent is
either equal (\code{weight = FALSE}) or proportional to the inverse-square
of its distance from the seed point (\code{weight = TRUE}), which clusters
subsample locations more tightly.

The method is introduced in Antell et al. (2020) and described in
detail in Methods S1 therein.
}
\references{
\insertRef{Antell2020}{divvy}
}
\seealso{
\code{\link[=clustr]{clustr()}}
}
